#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ seeder'–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
# –ó–∞–ø—É—Å–∫–∞–µ—Ç seeder –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

set -e

echo "üöÄ –ó–∞–ø—É—Å–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ seeder'–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
if ! docker ps | grep -q "community-fundchain-backend"; then
    echo "‚ùå Backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ docker-compose up -d backend"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–∞–π–ª seeder'–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if [ ! -f "scripts/seed_10_participants_fixed.py" ]; then
    echo "‚ùå –§–∞–π–ª seed_10_participants_fixed.py –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

echo "üìã –ö–æ–ø–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π seeder –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä..."

# –ö–æ–ø–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π seeder –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker cp scripts/seed_10_participants_fixed.py community-fundchain-backend-1:/app/seed_10_participants_fixed.py

echo "üîß –ó–∞–ø—É—Å–∫–∞–µ–º seeder –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ..."

# –ó–∞–ø—É—Å–∫–∞–µ–º seeder –≤ backend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it community-fundchain-backend-1 python /app/seed_10_participants_fixed.py

echo "‚úÖ Seeder –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo ""
echo "üìä –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:"
echo "   - 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏"
echo "   - 3 –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ ID –∏–∑ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤"
echo "   - –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è"
echo "   - –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
echo ""
echo "üåê –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!"
